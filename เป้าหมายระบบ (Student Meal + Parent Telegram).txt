‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏¥‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡πä‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô

‡πÄ‡∏Ñ‡∏™‡∏ô‡∏µ‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å üëç ‡πÅ‡∏•‡∏∞ ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å employee 1:1 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÅ‡∏ö‡∏ö ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á 1 ‡∏Ñ‡∏ô ‚Üî ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô
‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ú‡∏°‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ / Welfare ‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö (Student Meal + Parent Telegram)

‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á 1 ‡∏Ñ‡∏ô

‡πÉ‡∏ä‡πâ Telegram 1 account

‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô

‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 1 ‡∏Ñ‡∏ô

‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ñ‡∏ô (‡∏û‡πà‡∏≠ + ‡πÅ‡∏°‡πà)

‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:

‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£

‡∏¢‡∏≠‡∏î‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô

‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á

‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô / ‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô)

üëâ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Many-to-Many

1Ô∏è‚É£ Flow Diagram (‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á + ‡∏•‡∏π‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô)
flowchart TD
    A[‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á Add Telegram Bot] --> B[/register]
    B --> C[‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á]
    C --> D[‡πÉ‡∏™‡πà Student Code / ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô]
    D --> E[‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô]
    E -->|‡πÑ‡∏°‡πà‡∏û‡∏ö| F[‡πÅ‡∏à‡πâ‡∏á Error]
    E -->|‡∏û‡∏ö| G[‡∏™‡πà‡∏á OTP ‡πÑ‡∏õ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏µ]
    G --> H[‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡πÉ‡∏™‡πà OTP]
    H --> I[Verify OTP]
    I -->|‡∏ú‡πà‡∏≤‡∏ô| J[‡∏ú‡∏π‡∏Å Parent ‚Üî Student]
    J --> K[‡∏ñ‡∏≤‡∏°: ‡∏°‡∏µ‡∏•‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡πÑ‡∏´‡∏°?]
    K -->|‡∏°‡∏µ| D
    K -->|‡πÑ‡∏°‡πà‡∏°‡∏µ| L[‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à]
2Ô∏è‚É£ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Database (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
üë®‚Äçüë©‚Äçüëß Parent (Telegram User)
CREATE TABLE parent (
    parent_id          INT IDENTITY PRIMARY KEY,
    telegram_user_id   BIGINT UNIQUE,
    chat_id            BIGINT,
    fullname            VARCHAR(100),
    mobile              VARCHAR(20),
    register_date       DATETIME DEFAULT GETDATE(),
    status              VARCHAR(10) DEFAULT 'ACTIVE'
);
üéì Student
CREATE TABLE student (
    student_code   VARCHAR(20) PRIMARY KEY,
    fullname       VARCHAR(100),
    class          VARCHAR(20),
    active_flag    BIT
);
üîó Parent ‚Üî Student (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö)
CREATE TABLE parent_student (
    parent_id     INT,
    student_code  VARCHAR(20),
    relation      VARCHAR(20), -- FATHER / MOTHER / GUARDIAN
    active_flag   BIT DEFAULT 1,
    CONSTRAINT PK_parent_student PRIMARY KEY (parent_id, student_code)
);
üç± Meal Transaction
CREATE TABLE meal_transaction (
    txn_id        BIGINT IDENTITY PRIMARY KEY,
    student_code  VARCHAR(20),
    meal_date     DATE,
    item_name     VARCHAR(100),
    amount        DECIMAL(10,2),
    txn_time      DATETIME
);
üîê OTP (‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ)
CREATE TABLE telegram_otp (
    ref_code     VARCHAR(20), -- student_code
    otp_hash     VARCHAR(255),
    expire_at    DATETIME,
    retry_count  INT DEFAULT 0
);
3Ô∏è‚É£ API Design (Parent + Multi Student)
üìå ‡∏Ç‡∏≠ OTP ‡∏ú‡∏π‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
POST /api/parent/request-otp
{
  "student_code": "STD00123"
}

Logic:

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö student

‡∏î‡∏∂‡∏á mobile ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô

‡∏™‡πà‡∏á OTP

‚úÖ Verify OTP + ‡∏ú‡∏π‡∏Å Parent ‚Üî Student
POST /api/parent/verify
{
  "student_code": "STD00123",
  "otp": "123456",
  "telegram_user_id": 123456789,
  "chat_id": 987654321,
  "relation": "MOTHER"
}

Result:

‡∏ñ‡πâ‡∏≤ parent ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí CREATE parent

INSERT parent_student

üìä ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
GET /api/parent/students?telegram_user_id=xxx
üçΩÔ∏è ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô
GET /api/parent/meals?student_code=STD00123&date=2026-01-27
4Ô∏è‚É£ Telegram Bot UX (‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á)
‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å
/register        ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á
/mychildren      ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å
/today           ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏•‡∏π‡∏Å‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£
/history         ‡∏î‡∏π‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Bot Interaction
üë©‚Äçüë¶ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏∏‡∏ï‡∏£:
1Ô∏è‚É£ ‡∏î.‡∏ä. ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤ ‡∏õ.3/2
2Ô∏è‚É£ ‡∏î.‡∏ç. ‡∏ô‡πâ‡∏≥‡∏ù‡∏ô ‡∏õ.1/1


‡∏ï‡∏≠‡∏ö 1 ‡∏´‡∏£‡∏∑‡∏≠ 2
5Ô∏è‚É£ ‡∏Å‡∏£‡∏ì‡∏µ ‡∏û‡πà‡∏≠ + ‡πÅ‡∏°‡πà + ‡∏•‡∏π‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô (Scenario ‡∏à‡∏£‡∏¥‡∏á)
‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•	Telegram	‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‡∏û‡πà‡∏≠	1 account	‡∏•‡∏π‡∏Å A, ‡∏•‡∏π‡∏Å B
‡πÅ‡∏°‡πà	1 account	‡∏•‡∏π‡∏Å A, ‡∏•‡∏π‡∏Å B
‡∏•‡∏π‡∏Å A	-	Parent 2 ‡∏Ñ‡∏ô
‡∏•‡∏π‡∏Å B	-	Parent 2 ‡∏Ñ‡∏ô

‚úî ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö
‚úî ‡∏Ñ‡∏∏‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô
‚úî ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ

6Ô∏è‚É£ Security & Policy (‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏≠‡∏ö‡∏°‡∏≤‡∏Å)

OTP ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚â§ 5 ‡∏ô‡∏≤‡∏ó‡∏µ

Parent ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å

Log ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

Admin ‡∏ñ‡∏≠‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Parent ‡πÑ‡∏î‡πâ

‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠:

üñºÔ∏è Diagram ‡∏†‡∏≤‡∏û‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Parent ‚Üí Student ‚Üí Meal)

üì± Mock ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Telegram Bot ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á

üè´ ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô Present ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

üß© ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° POS ‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á